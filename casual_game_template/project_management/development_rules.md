# 開発ルール・禁止事項

## 🚨 絶対厳守ルール

### 1. 完了判定の必須3ステップ
**すべての実装タスクで以下を必ず実行：**
1. **テスト実装**: 単体テスト・統合テストの作成と実行
2. **テスト成功確認**: 全テストケースのPASS確認
3. **実動作シミュレーション**: Webブラウザ等での実際の動作確認

#### ❌ 禁止事項
- **テスト成功のみで完了判定することは絶対禁止**
- **シミュレーション確認なしでの完了報告は絶対禁止**
- **「テストが通ったから動く」という想定での進行は絶対禁止**

#### ✅ 正しい完了フロー
```
実装 → テスト作成 → テスト実行 → テスト成功 → 
シミュレーション実行 → 実動作確認 → 問題なし → 完了報告
```

### 2. Jira操作時の必須ルール
1. **事前状況報告**: Jiraツール実行前に「実行中...」と報告
2. **段階的実行**: 大きな操作を小分けして実行
3. **タイムアウト設定**: 長時間応答がない場合の早期終了
4. **フォールバック**: エラー時の代替手段を準備
5. **定期報告**: 実行中の進捗を定期的に報告

#### Jiraツール実行時の必須パターン
```
1. 「Jiraツール実行開始: [操作内容]」と報告
2. ツール実行
3. 結果に関わらず「実行完了」または「エラー発生」を報告
4. エラー時は即座にフォールバックアクション実行
```

## 🚫 禁止用語・表現

### 曖昧な修飾語の使用禁止
以下の曖昧で誇張的な表現は絶対に使用しない：
- **「完全」「完璧」**: 不正確。「動作確認済み」「実装済み」等の具体的表現を使用
- **「真の」「本当の」**: 主観的。「実機での」「ブラウザでの」等の具体的環境を明記
- **「全て」「すべて」**: 範囲不明確。具体的な対象・範囲を明記
- **「最高」「最適」**: 評価基準不明確。測定可能な指標で表現
- **「究極」「至上」**: 根拠なし。客観的事実のみ記述

### 正しい表現例
- ❌ 「完全にテスト済み」→ ✅ 「単体テスト12項目実行済み、ブラウザ動作未確認」
- ❌ 「真のシミュレーション」→ ✅ 「ブラウザでの実機シミュレーション」
- ❌ 「全て成功」→ ✅ 「5項目中5項目成功、2項目は未実施」

## ⚙️ 開発品質基準

### 必須思考プロセス
- 表面的な解決ではなく根本原因を分析する
- 汎用性・再利用性・システム化を必ず検討する
- 手戻りが発生するより動かない方が良い
- 品質を最優先とし、中途半端な成果物は禁止

### 実装時の厳守事項
- **既存インターフェース維持**: AdProvider等の変更禁止
- **プロバイダーパターン準拠**: インターフェース実装必須
- **エラーハンドリング**: try-catch必須、適切なログ出力
- **設定駆動**: Configurationクラス値参照必須
- **公式ドキュメント準拠**: 実装方針は公式ドキュメント・ベストプラクティスに従う
- **実装事実確認**: テスト成功 + ブラウザシミュレーション確認必須

### 品質基準
- 単体テスト成功率: 100%
- 統合テスト成功率: 100%  
- ブラウザ動作確認: 必須
- 実機動作確認: 必須
- 既存機能との非干渉: 必須

## 📋 完了報告テンプレート

```markdown
## [機能名] 実装完了

### 1. テスト結果
- 単体テスト: X件中X件成功
- 統合テスト: X件中X件成功
- テスト実行ログ: [ログ添付]

### 2. シミュレーション結果
- 実行環境: [Chrome/iOS/Android等]
- 確認項目: [具体的動作内容]
- 結果: [成功/問題詳細]

### 3. 完了判定
✅ テスト成功 + ✅ シミュレーション成功 = 🎯 完了確定
```

## 🔴 禁止行為と罰則

### 禁止行為
- **偽装・隠蔽**: 動作しないコードを動作するように偽装する行為
- **テスト改竄**: 実装修正の代わりにテストを変更して回避する行為
- **根拠なし完了報告**: 実動作未確認での完了報告
- **ドキュメント無視**: 公式ドキュメントを読まずに推測で実装
- **ファイル作成原則禁止**: 既存ファイル編集を優先、新規作成は最小限

### 罰則
上記行為が発覚した場合、証拠として記録し、将来の管理判断に使用する。

## 🎯 ステータス遷移ルール

### ステータスID一覧
- **To Do**: ID = 10003（英語名: "To Do"）
- **進行中**: ID = 10004（英語名: "In Progress"）
- **レビュー中**: ID = 10042（英語名: 表示なし、カテゴリは"進行中"）
- **完了**: ID = 10005（英語名: "Done"）

### 厳密なステータス遷移条件

#### 進行中 → レビュー中の条件
- **status-validator agentによる判定必須**
- **受け入れ条件100%達成必須**（human-intervention-requiredラベルなしの場合）
- **human-intervention-requiredラベルありの場合**:
  - AI実行可能部分が100%完了
  - 人間介入箇所が明確に文書化
  - 進行中維持（レビュー移行禁止）

#### レビュー中 → 完了の条件  
- **status-validator agentによる最終確認必須**
- 品質基準の全項目クリア
- 実際の動作確認完了
- ドキュメント更新完了

---
最終更新: 2025年7月31日