# Flutter実践開発　iPhone／Android両対応アプリ開発のテクニック

**WEB+DB PRESS plus**

著者：渡部陽太 (Watanave Yohta)

---

## プロフェッショナルFlutterエンジニアへの道

### 技術要素
- Dart言語 / Riverpod / コード署名
- フレームワークによる最適化 / パッケージ管理  
- 国際化（日本語）対応 / アセット管理
- テーマ / 画面遷移 / パフォーマンス

**環境構築からリリースに必要なネイティブ知識まで**

*技術評論社*

---

## 免責事項

本書に記載された内容は、情報の提供のみを目的としています。したがって、本書の記述に従った運用は、必ずお客様自身の責任と判断によって行ってください。これらの情報の運用の結果について、技術評論社および著者はいかなる責任も負いません。

本書記載の情報は2024年1月時点のものですので、ご利用時には変更されている場合もあります。

本書に記載されているサンプルプログラムや操作による実行結果や画面図などは、特定の設定に基づいた環境で再現される一例です。

ソフトウェアに関する記述は、本文に記載してあるバージョンをもとにしています。ソフトウェアはバージョンアップされる場合があり、本書での説明とは機能内容や画面図などが異なってしまうこともあり得ます。本書ご購入の前に、必ずバージョン番号をご確認ください。

以上の注意事項をご承諾いただいたうえで、本書をご利用願います。注意事項をお読みいただかずにお問い合わせいただいても、技術評論社および著者は対処しかねます。あらかじめ、ご承知おきください。

本書に登場する製品名などは、一般に各社の商標または登録商標です。なお、本書中にTM、Ⓒ、Ⓡなどのマークは記載しておりません。

---

## はじめに

本書のコンセプトは「**プロフェッショナルなFlutterエンジニアになるための近道**」です。すでに他のプログラミング言語やフレームワークを習得している方に向けて、Flutterにチャレンジする際に手にとっていただく一冊として執筆しました。

クライアントワークを生業としている筆者は、これまでFlutter開発現場をいくつか目にしてきました。その経験を元に、多くの開発現場で求められる知識や、重要だけれど独学で学びにくいトピックを取り上げ、コンセプトである「プロフェッショナルなFlutterエンジニアになるための近道」を検討しました。Flutterフレームワークについては、基本から実際のプロジェクトで活用されるテクニックまで、焦点を絞って紹介しています。一方、Flutterの開発言語であるDartの言語仕様についてはできるだけ網羅的に解説しています。これは「新しいフレームワークに触れるときは、使用言語を頭にたたき込んでから」という筆者のスタイルを反映しています。

Flutterはマルチプラットフォーム対応ということもあり、スタートアップから大企業まで採用事例が増えています。開発者体験がよく、要件を満たしたアプリが作りやすいのはFlutterの特徴の一つです。しかし、中長期的に運用できる高い保守性をもったアプリにするためには、他のフレームワークと同様に相応の知識と経験が必要です。Flutterが多くのプロジェクトで採用されているいま、コンセプトである「プロフェッショナルなFlutterエンジニア」が市場で強く求められています。

*2024年1月*  
*渡部陽太*

---

## 検証環境

- **macOS Sonoma 14.3**
- **Flutter 3.16.9**
- **Dart 3.2.6**
- **Android Studio Hedgehog | 2023.1.1 Patch 2**
- **Xcode 15.2**

本書ではiOSとAndroidを対象としたモバイルアプリ開発についてのみ取り扱います。iOSを開発対象にすることもあり、本書ではmacOS環境についてのみ取り扱います。シェルは最新のmacOSに合わせてzshとします。

## 対象読者

何らかのプログラミング言語やフレームワークを習得している方を対象にしています。静的型付け言語やUIフレームワークの前提知識があると読み進めやすいでしょう。iOSエンジニアまたはAndroidエンジニアで、これからFlutterを学びたい方には特にマッチするでしょう。

## 本書の特徴

Flutterの環境構築にはじまり、フレームワークの基礎から実践的なテクニックまで解説します。Flutterにはフレームワークの中心となるウィジェットというクラスがあります。本書ではウィジェットを使った小さなプログラムを実装しながら基礎を学びます。重要なクラスであるため後半では内部のしくみにも踏み込んで解説し、パフォーマンスを意識した実装のコツについても紹介します。

ただ、このウィジェットはたくさんのバリエーションがあり、本書ではリファレンスのように広く紹介はしません。ウィジェットの理解を深めるのが本書の位置付けです。多くのウィジェットを知りたくなったらFlutter公式Webサイトの「Widget catalog」のページや、YouTubeのプレイリスト「Flutter Widget of the Week」がお勧めです。

https://docs.flutter.dev/ui/widgets

また、サンプルコードに掲載されたウィジェットや関連クラスについて、詳しく知りたい場合は公式のリファレンスを参照してください。

https://api.flutter.dev/flutter/widgets/widgets-library.html

本書はDart公式Webサイト<sup>注1</sup>、およびFlutter公式Webサイト<sup>注2</sup>の内容を一部引用しています。Dart公式WebサイトはCC BY 4.0<sup>注3</sup>とBSD-3-Clause<sup>注4</sup>のもとでライセンスされています。Flutter公式WebサイトはCC BY 4.0<sup>注5</sup>とBSDのもとでライセンスされています。

## 本書の構成

第1章では環境構築を行います。ご自身のMacを操作しながら読み進めてください。

第2章では開発言語のDartを学びます。必要に応じて読み飛ばしていただいてもかまいません。気になった要素を後から確認しても良いでしょう。

第3章から第8章まではFlutterの基礎から応用まで、ハンズオンを交えながら理解を深めます。第3章はコードを写経しながら読み進めてください。以降は第4～5章を読んで第6章で手を動かすハンズオン、第7章を読んで第8章で再びハンズオンといった具合に進行します。

第9章と第10章ではフレームワークの内部を覗き、パフォーマンスについて学びます。

最後に第11章ではiOS／Androidのネイティブ開発についての解説をします。

なお、本書は技術評論社の『WEB+DB PRESS Vol.130』の特集として掲載された「いまはじめるFlutter」の内容をベースに、詳細な説明の加筆や最新の状況を踏まえたトピックの変更を行っています。

### 参考リンク

- <sup>注1</sup> https://dart.dev/
- <sup>注2</sup> https://docs.flutter.dev/
- <sup>注3</sup> https://creativecommons.org/licenses/by/4.0/
- <sup>注4</sup> https://opensource.org/license/bsd-3-clause/
- <sup>注5</sup> https://creativecommons.org/licenses/by/4.0/

---

## 本書のサンプルプログラムについて

本書のサンプルプログラムは、下記のGitHubにて公開しています。

https://github.com/watanavex/flutter-dev-book

## 本書の正誤情報や追加情報について

本書の正誤情報や追加情報は、下記のサポートサイトにて公開しています。

https://gihyo.jp/book/2024/978-4-297-13993-3

## 謝辞

Flutterをキャッチアップし始めた頃からアドバイスをくださり、この書籍のベースとなった特集記事のレビューにも携わってくれたmonoさん。monoさんから頂いた助言の数々が、この書籍のゴールを照らしてくれました。

執筆にあたり、Flutterの興味深い開発経験をさせてくださったsu-さん、maemaeさんに感謝を伝えたい。みなさんから頂いた経験が執筆の勇気をくれました。

レビューに関わってくれた株式会社ゆめみの同僚たち。おかやまん、json、いせりゅうさん、田畑さん、りずさん、しまもんさん、でんでんさん、やまぱんさん。この分量の書籍を、細やかに丁寧にレビューしてくださり感激しました。みなさんのおかげで、私の書いたコンテンツが書籍として大きく前進しました。ありがとう。

編集者の菊池さん。菊池さんの「この書籍を少しでも良いものにしよう」という姿勢が、折れそうな私の心を何度蘇らせたことでしょう。初めから最後まで並走してくださり感謝です。

最後に、常にそばで支えてくれた妻に感謝を伝えたい。締切恐怖症である私をよく理解したあなたの放つ「大丈夫」の言葉にどれだけ励まされたことか。

そして、心の支えである2人の息子たち。休日返上での執筆作業が続き、寂しい思いをさせたよね。日向、日彩、今度の休日は水族館に行こう！

---

# 目次

## 第1章　環境構築とアプリの実行
*Flutter SDK、Android Studio、Xcode*

### 1.1　なぜFlutterが注目を集めているのか　2
- マルチプラットフォーム　2
- 高速な実行速度　3
- 優れた開発者体験　3

### 1.2　Flutterの環境構築　3
- Flutterのインストール　4
- プラットフォームごとの環境のインストール　5
  - Androidの開発環境をインストールする　6
  - iOSの開発環境をインストールする　9
  - **Tips** Xcodeのバージョンを使い分けるインストールのしかた　10
  - **Tips** CocoaPodsがインストールできない場合　10
- Android Studioの設定　Flutterと親和性の高いIDE　12

### 1.3　fvmによるFlutterのバージョン管理　13
- fvmのインストール　13
- fvmを利用したFlutterのインストール　13

### 1.4　プロジェクトの作成　15
- Android Studioでの作成手順　15
- テンプレートプロジェクトをのぞいてみよう　16
- fvmの設定　17

### 1.5　Flutterアプリの実行　18
- iOS Simulatorでの実行　19
- Android Emulatorでの実行　20
  - Android Emulatorを作成する　20
  - Android Emulatorを起動し、アプリを実行する　21

### 1.6　まとめ　22

## 第2章　Dartの言語仕様　23

### 2.1　変数宣言　24
- 変数と型推論　24
- 定数　finalとconst　24
- いろいろな初期値の与え方　25
  - 遅延初期化　26

### 2.2　組み込み型　27
- 数値型　27
  - int　整数型　27
  - double　浮動小数型　27
- String　文字列型　27
- bool　論理型　29
- List　配列　29
- Set　集合　30
- Map　連想配列　30
- Record　タプル　31
- Objectクラス　すべてのクラスのスーパークラス　33

### 2.3　ジェネリクス　34
- ジェネリッククラス　34
- ジェネリック関数　35

### 2.4　演算子　35
- 算術演算子　35
- 比較演算子　36
- 三項演算子　37
- カスケード記法　37
- コレクションのオペレータ　38
  - Spread演算子　38
  - 制御構文演算子　38