# CLAUDE.md - AI開発ルール・品質基準・禁止事項

**用途**: AI開発時の厳格なルール・品質基準・禁止事項（静的設定）
**併読**: AI_MASTER.md（プロジェクト情報・実装進捗）を必ず併読すること

## 📌 プロジェクト概要（静的情報）
- **目的**: AI支援による効率的なカジュアルゲーム開発ビジネス
- **目標**: 月4本リリース、月収30-65万円  
- **技術スタック**: Flutter + Flame + Claude Code + MCP
- **統合ガイド**: `AI_MASTER.md`（実装進捗・技術仕様はこちらを参照）

## 🚨 AIによる曖昧表現の絶対禁止

### 使用禁止語句（測定不可能・根拠なし）
```
❌ 絶対使用禁止: 「完全」「完璧」「真の」「本当の」「全て」「すべて」
❌ 絶対使用禁止: 「最高」「最適」「究極」「至上」「十分」「適切」
```

### 必須表現パターン（具体的・測定可能）
```
✅ 必須: 数値・範囲・環境を明記
✅ 必須: 未確認事項を明示
✅ 必須: 客観的事実のみ記述
```

### 強制修正例
```
❌「完全にテスト済み」→ ✅「単体テスト12項目実行済み、ブラウザ動作未確認」
❌「真のシミュレーション」→ ✅「ブラウザでの実機シミュレーション」
❌「全て成功」→ ✅「5項目中5項目成功、2項目は未実施」
❌「最適化完了」→ ✅「応答時間30ms→15msに短縮、メモリ使用量は未測定」
```

## 🚨 AI実装時の絶対実行ルール

### 開発品質基準（厳守）
```
1. 表面的修正禁止 → 根本原因の分析必須
2. 個別解決禁止 → 汎用性・再利用性・システム化必須  
3. 中途半端禁止 → 手戻りより動かない方が良い
4. 品質最優先 → 中途半端な成果物は絶対禁止
```

### 完了判定の3ステップ実行（100%厳守）
```
実装タスクでの必須実行順序:
ステップ1: テスト実装（単体テスト・統合テスト作成+実行）
ステップ2: テスト成功確認（全テストケースPASS確認）  
ステップ3: 実動作シミュレーション（ブラウザ等での実際動作確認）

❌ 絶対禁止: テスト成功のみでの完了判定
❌ 絶対禁止: シミュレーション確認なしでの完了報告
❌ 絶対禁止: 「テストが通ったから動く」想定での進行
```

### 完了報告の強制フォーマット
```
## [機能名] 実装完了報告

### 1. テスト実行結果（必須）
- 単体テスト: X件中X件成功（失敗時は理由明記）
- 統合テスト: X件中X件成功（失敗時は理由明記）

### 2. シミュレーション実行結果（必須）  
- 実行環境: [Chrome/Safari/iOS/Android等を明記]
- 確認項目: [具体的操作・表示内容を明記]
- 結果: [成功/失敗の事実+問題詳細]

### 3. 完了判定（必須）
✅ テスト成功 + ✅ シミュレーション成功 = 🎯 完了確定
```

## 🚨 実装時の絶対制約（契約違反は厳罰）

### 既存システムとの契約（変更絶対禁止）
```
❌ 変更禁止: AdProvider・AudioProvider・AnalyticsProviderインターフェース
❌ 変更禁止: 既存プロバイダーパターン構造
❌ 変更禁止: 設定駆動アーキテクチャ（Configurationクラス必須参照）
```

### 必須実装パターン（100%厳守）
```
✅ 必須: プロバイダーパターンでのインターフェース実装
✅ 必須: try-catch例外処理+適切なログ出力
✅ 必須: 公式ドキュメント・ベストプラクティス準拠
✅ 必須: 実装事実確認（テスト成功+ブラウザシミュレーション）
```

### 偽装・隠蔽行為の絶対禁止
```
❌ 厳罰対象: テストのみ成功で実動作未確認での完了報告
❌ 厳罰対象: 動作しないコードを動作するように偽装
❌ 厳罰対象: 実装修正の代わりにテスト変更で回避
❌ 厳罰対象: 根拠なし完了報告（実動作未確認）
```

## 🚨 公式ドキュメント準拠の絶対義務

### 実装前の必須確認（100%実行）
```
1. 公式ドキュメント精読（推測実装は厳罰対象）
2. 公式サンプルコードの動作検証
3. ベストプラクティス適用確認
4. 公式推奨例外処理の採用
5. 公式パフォーマンスガイドライン遵守
```

### 参照必須の公式ドキュメント
```
必須参照: AI_MASTER.md「公式ドキュメント参照」セクション
（Google Mobile Ads、Firebase Analytics、audioplayers、Flame Engine、Flutter等）
```

### 契約違反行為と厳罰
```
❌ 証拠記録対象: 偽装・隠蔽（動作しないコードを動作するように偽装）
❌ 証拠記録対象: テスト改竄（実装修正の代わりにテスト変更で回避）
❌ 証拠記録対象: 根拠なし完了報告（実動作未確認での完了報告）
❌ 証拠記録対象: ドキュメント無視（公式ドキュメントを読まずに推測実装）

⚠️ 罰則: 上記行為発覚時、証拠記録し将来の管理判断に使用
```